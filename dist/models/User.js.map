{"version":3,"sources":["../../src/models/User.ts"],"sourcesContent":["import { t as Type } from 'elysia'\n\nimport { Schema } from 'mongoose'\nimport { collectionsData } from '@/constants/config'\n\nimport { setDefaultSettingsSchema } from '@/shared/set-default-settings-schema'\nimport { connectDB } from '@/shared/connection-db'\n\nexport const UserSchema = {\n  body: Type.Object({\n    email: Type.String({ format: 'email' }),\n    password: Type.String({ minLength: 6, maxLength: 20, pattern: '^[a-zA-Z0-9]*$' })\n  })\n}\n\ntype IUserModel = typeof UserSchema.body.static\nexport type IUser = IUserModel & {\n  token?: string\n  comparePassword?: (password: string) => boolean\n}\n\nconst SchemaModel = new Schema<IUser>(\n  {\n    email: {\n      type: String,\n      required: true,\n      unique: true\n    },\n    password: {\n      type: String,\n      required: true\n    }\n  },\n  {\n    timestamps: true,\n    collection: collectionsData.User.collection\n  }\n)\n\nsetDefaultSettingsSchema(SchemaModel)\n\nSchemaModel.methods.comparePassword = function (this: IUser, password: string) {\n  return this.password === password\n}\n\nexport const User = connectDB.model<IUser>(collectionsData.User.name, SchemaModel)\n"],"names":["User","UserSchema","body","Type","Object","email","String","format","password","minLength","maxLength","pattern","SchemaModel","Schema","type","required","unique","timestamps","collection","collectionsData","setDefaultSettingsSchema","methods","comparePassword","connectDB","model","name"],"mappings":";;;;;;;;;;;IA6CaA,IAAI;eAAJA;;IArCAC,UAAU;eAAVA;;;wBARa;0BAEH;wBACS;0CAES;8BACf;AAEnB,MAAMA,aAAa;IACxBC,MAAMC,SAAI,CAACC,MAAM,CAAC;QAChBC,OAAOF,SAAI,CAACG,MAAM,CAAC;YAAEC,QAAQ;QAAQ;QACrCC,UAAUL,SAAI,CAACG,MAAM,CAAC;YAAEG,WAAW;YAAGC,WAAW;YAAIC,SAAS;QAAiB;IACjF;AACF;AAQA,MAAMC,cAAc,IAAIC,gBAAM,CAC5B;IACER,OAAO;QACLS,MAAMR;QACNS,UAAU;QACVC,QAAQ;IACV;IACAR,UAAU;QACRM,MAAMR;QACNS,UAAU;IACZ;AACF,GACA;IACEE,YAAY;IACZC,YAAYC,uBAAe,CAACnB,IAAI,CAACkB,UAAU;AAC7C;AAGFE,IAAAA,kDAAwB,EAACR;AAEzBA,YAAYS,OAAO,CAACC,eAAe,GAAG,SAAuBd,QAAgB;IAC3E,OAAO,IAAI,CAACA,QAAQ,KAAKA;AAC3B;AAEO,MAAMR,OAAOuB,uBAAS,CAACC,KAAK,CAAQL,uBAAe,CAACnB,IAAI,CAACyB,IAAI,EAAEb"}